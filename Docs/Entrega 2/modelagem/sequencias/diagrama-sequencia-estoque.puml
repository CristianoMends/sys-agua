@startuml
skin rose

title Diagrama de Sequência - Registro de Entrada no Estoque

actor Usuário as usr
participant TelaRegistroEntradaEstoque as view
participant EstoqueController as ctrl
participant EstoqueRepository as repo
participant ProdutoRepository as prodRepo
participant Estoque as model
participant Produto as produto

usr -> view : Preencher formulário de entrada
view -> ctrl : registrarEntrada(quantidade, produtoId)
ctrl -> prodRepo : buscarPorId(produtoId)
prodRepo --> ctrl : Retornar Produto

ctrl -> repo : buscarEstoquePorProduto(produtoId)
repo --> ctrl : Retornar Estoque

ctrl -> model : Atualizar entradas no estoque
model -> ctrl : calcularDisponivel()

ctrl -> repo : registrarEntrada(quantidade, produtoId)
repo --> ctrl : Confirmação de atualização
ctrl -> view : Exibir mensagem de sucesso
view -> usr : Mensagem de confirmação exibida

alt Erro durante o registro
    ctrl -> view : Exibir mensagem de erro
    view -> usr : Mensagem de erro exibida
end

@enduml
